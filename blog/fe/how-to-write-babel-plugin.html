<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ä»é›¶å¼€å§‹å†™Babelæ’ä»¶ | ç™¾åº¦EUX </title>
    <link rel="stylesheet" href="/style.css">
    <script>
      (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?d232748d06c1fe09a6db3db0077669b7";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();

      var _vds = _vds || [];
      window._vds = _vds;
      (function () {
        _vds.push(['setAccountId', '66707fb8b27442d5b3ccca57a56800fa']);
        _vds.push(['trackBot', false]);

        (function () {
          var vds = document.createElement('script');
          vds.type = 'text/javascript';
          vds.async = true;
          vds.src = '//dn-growing.qbox.me/vds.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(vds, s);
        })();
      })();
    </script>
</head>
<body>
<div id="root">
    <div class="main" data-reactroot="" data-reactid="1" data-react-checksum="-1652028387"><!-- react-empty: 2 --><header class="eux-header clearfix" data-reactid="3"><div class="eux-header-top" data-reactid="4"><a href="javascript:void(0);" class="eux-portable-menu" data-reactid="5"><span data-reactid="6"></span><span data-reactid="7"></span><span data-reactid="8"></span></a><!-- react-empty: 9 --><nav class="menu-primary-container" data-reactid="10"><ul id="menu-primary" class="menu" data-reactid="11"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-25" data-reactid="12"><a href="/" data-reactid="13">HOME</a></li><li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent menu-item-has-children menu-item-45" data-reactid="14"><a href="/" data-reactid="15">BLOG</a><ul class="sub-menu" data-reactid="16"><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-menu-item menu-item-63" data-reactid="17"><a href="/ue" data-reactid="18">äº¤äº’</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-menu-item menu-item-63" data-reactid="19"><a href="/ui" data-reactid="20">è§†è§‰</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-menu-item menu-item-63" data-reactid="21"><a href="/fe" data-reactid="22">å‰ç«¯</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-menu-item menu-item-63" data-reactid="23"><a href="/team" data-reactid="24">å›¢é˜Ÿ</a></li></ul></li><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-46" data-reactid="25"><a href="/tools" data-reactid="26">TOOLS</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-112" data-reactid="27"><a href="/works" data-reactid="28">WORKS</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-138" data-reactid="29"><a href="/jobs" data-reactid="30">JOBS</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-50" data-reactid="31"><a href="/about-us" data-reactid="32">ABOUT US</a></li></ul></nav></div></header><div class="eux-singular clearfix" data-reactid="33"><div class="container-singular clearfix" data-reactid="34"><nav class="menu-categories-container" data-reactid="35"><ul id="menu-categories" class="menu" data-reactid="36"><li class="menu-item menu-item-type-custom menu-item-object-custom current_page_item menu-item-55" data-reactid="37"><span data-reactid="38"><a href="/" data-reactid="39">å…¨éƒ¨</a></span></li><li class="menu-item menu-item-type-custom menu-item-object-custom current_page_item menu-item-55" data-reactid="40"><span data-reactid="41"><a href="/ue" data-reactid="42">äº¤äº’</a></span></li><li class="menu-item menu-item-type-custom menu-item-object-custom current_page_item menu-item-55" data-reactid="43"><span data-reactid="44"><a href="/ui" data-reactid="45">è§†è§‰</a></span></li><li class="current-menu-item menu-item menu-item-type-custom menu-item-object-custom current_page_item menu-item-55" data-reactid="46"><span data-reactid="47"><a href="/fe" data-reactid="48">å‰ç«¯</a></span></li><li class="menu-item menu-item-type-custom menu-item-object-custom current_page_item menu-item-55" data-reactid="49"><span data-reactid="50"><a href="/team" data-reactid="51">å›¢é˜Ÿ</a></span></li></ul></nav><div class="inner clearfix" data-reactid="52"><div class="article-meta" data-reactid="53"><h1 class="title" data-reactid="54">ä»é›¶å¼€å§‹å†™Babelæ’ä»¶</h1><div class="eux-page-detail" data-reactid="55"><span data-reactid="56"><em data-reactid="57">by.</em><!-- react-text: 58 -->è‘±<!-- /react-text --></span><span data-reactid="59">2017-12-6</span></div></div><article data-reactid="60"><p data-reactid="61">åœ¨ç°ä»£Webå‰ç«¯å¼€å‘ä¸­ï¼Œç¦»ä¸å¼€JavaScript es6/7ï¼Œè€Œ ES6/7 ä¸­æœ€å¸¸ç”¨çš„è¯­æ³•ç¿»è¯‘å½“å± Babel äº†ã€‚</p><p data-reactid="62">è¿™ç¯‡æ–‡ç« å°†å¸¦è¯»è€…ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªè‡ªå®šä¹‰çš„Babelæ’ä»¶ã€‚</p><h2 id="babelæ˜¯ä»€ä¹ˆ" data-reactid="63"><a href="#babel%E6%98%AF%E4%BB%80%E4%B9%88" aria-hidden="true" data-reactid="64"><span class="icon icon-link" data-reactid="65"></span></a><!-- react-text: 66 -->Babelæ˜¯ä»€ä¹ˆ<!-- /react-text --></h2><p data-reactid="67"><!-- react-text: 68 -->Babel ä½¿ç”¨ babylon è§£æ JavaScript ä»£ç ï¼Œå¾—åˆ°æŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntax Treeï¼Œåæ–‡ç®€ç§° ASTï¼‰ã€‚ åŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨<!-- /react-text --><code data-reactid="69">babel-generator</code><!-- react-text: 70 -->ï¼Œè¾“å…¥ä¸€ä¸ªåˆæ³•çš„ ASTï¼Œè¿˜åŸæˆ JavaScript ä»£ç <!-- /react-text --></p><img src="http://obu9je6ng.bkt.clouddn.com/FkKXk5xwPpo_reQHW3U3Y_yGF991?imageslim" width="434" height="98" data-reactid="71"/><p data-reactid="72">ä»£ç å¦‚ä¸‹ï¼š</p><pre data-reactid="73"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="74"><!-- react-text: 75 -->cosnt babel = <!-- /react-text --><span class="hljs-built_in" data-reactid="76">require</span><!-- react-text: 77 -->(<!-- /react-text --><span class="hljs-string" data-reactid="78">&#x27;babel-core&#x27;</span><!-- react-text: 79 -->)
<!-- /react-text --><span class="hljs-keyword" data-reactid="80">const</span><!-- react-text: 81 --> code = <!-- /react-text --><span class="hljs-string" data-reactid="82">`
import e from &#x27;./where&#x27;
const [ a, b, c ] = [ 1, 2, 3 ]
`</span><!-- react-text: 83 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="84">const</span><!-- react-text: 85 --> { ast } = babel.transform(code, { <!-- /react-text --><span class="hljs-attr" data-reactid="86">ast</span><!-- react-text: 87 -->: <!-- /react-text --><span class="hljs-literal" data-reactid="88">true</span><!-- react-text: 89 --> })

<!-- /react-text --><span class="hljs-keyword" data-reactid="90">const</span><!-- react-text: 91 --> generate = <!-- /react-text --><span class="hljs-built_in" data-reactid="92">require</span><!-- react-text: 93 -->(<!-- /react-text --><span class="hljs-string" data-reactid="94">&#x27;babel-generator&#x27;</span><!-- react-text: 95 -->)
<!-- /react-text --><span class="hljs-keyword" data-reactid="96">const</span><!-- react-text: 97 --> { <!-- /react-text --><span class="hljs-attr" data-reactid="98">code</span><!-- react-text: 99 -->: codeFromBabel } = generate(ast)<!-- /react-text --></code></pre><h3 id="ast" data-reactid="100"><a href="#ast" aria-hidden="true" data-reactid="101"><span class="icon icon-link" data-reactid="102"></span></a><!-- react-text: 103 -->AST<!-- /react-text --></h3><p data-reactid="104">ast åœ¨è¿™æ˜¯æŒ‡å°† JavaScript ä»£ç è¿›è¡Œè§£æå¾—åˆ°çš„æŠ½è±¡è¯­æ³•æ ‘ï¼ˆæ•°æ®ç»“æ„ï¼‰ã€‚ å¦‚ä»£ç </p><pre data-reactid="105"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="106"><span class="hljs-keyword" data-reactid="107">const</span><!-- react-text: 108 --> key = <!-- /react-text --><span class="hljs-string" data-reactid="109">&#x27;value&#x27;</span></code></pre><p data-reactid="110"><!-- react-text: 111 -->è§£æäº§ç”Ÿçš„ AST å¦‚ä¸‹å›¾æ‰€ç¤º <!-- /react-text --><img src="http://obu9je6ng.bkt.clouddn.com/Foe8OrdCEPOhQX4-VHbqkOtDruF9?imageslim" width="426" height="488" data-reactid="112"/></p><p data-reactid="113"><!-- react-text: 114 -->å»ºè®®ä½¿ç”¨ <!-- /react-text --><a href="http://astexplorer.net/#/Z1exs6BWMq" data-reactid="115">AST Explorer</a><!-- react-text: 116 --> åœ¨çº¿é¢„è§ˆ AST<!-- /react-text --></p><h2 id="plugin-å’Œ-preset" data-reactid="117"><a href="#plugin-%E5%92%8C-preset" aria-hidden="true" data-reactid="118"><span class="icon icon-link" data-reactid="119"></span></a><!-- react-text: 120 -->Plugin å’Œ Preset<!-- /react-text --></h2><p data-reactid="121">æˆ‘ä»¬åœ¨ä½¿ç”¨ Babel çš„æ—¶å€™ï¼Œé€šå¸¸éœ€è¦é…ç½®ä¸€äº›é¢„è®¾ï¼ˆpresetsï¼‰å’Œæ’ä»¶ï¼ˆpluginsï¼‰ã€‚ å¦‚</p><pre data-reactid="122"><code class="hljs language-json" data-query="{}" data-lang="json" data-reactid="123"><!-- react-text: 124 -->{
  <!-- /react-text --><span class="hljs-attr" data-reactid="125">&quot;presets&quot;</span><!-- react-text: 126 -->: [<!-- /react-text --><span class="hljs-string" data-reactid="127">&quot;env&quot;</span><!-- react-text: 128 -->],
  <!-- /react-text --><span class="hljs-attr" data-reactid="129">&quot;plugins&quot;</span><!-- react-text: 130 -->: [<!-- /react-text --><span class="hljs-string" data-reactid="131">&quot;async-to-generator&quot;</span><!-- react-text: 132 -->]
}<!-- /react-text --></code></pre><p data-reactid="133">å…¶å®ï¼Œpresetæ˜¯ä¸€å †pluginçš„ç»“åˆï¼Œé‚£ä¹ˆpluginåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å¦‚ä¸‹å›¾ï¼Œplugin ä¼šè½¬æ¢ ASTï¼Œå¯¹ AST è¿›è¡Œå¤„ç†ï¼Œä»è€Œä¹Ÿèƒ½å¤Ÿå½±å“åˆ°äº§ç”Ÿå‡ºæ¥çš„ JS Codeã€‚</p><img src="http://obu9je6ng.bkt.clouddn.com/FmBuevqTrAt8VApb-bnWygS6cwrK?imageslim" width="489" height="114" data-reactid="134"/><p data-reactid="135">åœ¨åæ–‡ä¸­å­¦ä¹ äº†å¼€å‘ Babel æ’ä»¶åï¼Œå°†é˜è¿°ä¸€ä¸‹ Babel plugin å’Œ preset çš„æ‰§è¡Œè¿‡ç¨‹å’Œé¡ºåºã€‚</p><h2 id="å¼€å‘-babel-æ’ä»¶" data-reactid="136"><a href="#%E5%BC%80%E5%8F%91-babel-%E6%8F%92%E4%BB%B6" aria-hidden="true" data-reactid="137"><span class="icon icon-link" data-reactid="138"></span></a><!-- react-text: 139 -->å¼€å‘ Babel æ’ä»¶<!-- /react-text --></h2><p data-reactid="140">äº†è§£äº† Babel æ’ä»¶çš„æ¦‚å¿µåï¼Œè®©æˆ‘ä»¬åŠ¨æ‰‹æ’¸ä¸€ä¸ª Babel æ’ä»¶å§ï¼</p><h3 id="æƒ…æ™¯å†ç°" data-reactid="141"><a href="#%E6%83%85%E6%99%AF%E5%86%8D%E7%8E%B0" aria-hidden="true" data-reactid="142"><span class="icon icon-link" data-reactid="143"></span></a><!-- react-text: 144 -->æƒ…æ™¯å†ç°<!-- /react-text --></h3><p data-reactid="145">åœ¨ä½¿ç”¨æ„å»ºå·¥å…· Webpack å¼€å‘å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½é€šå¸¸éœ€è¦ import ä¸€å¤§ä¸²ä¾èµ–</p><pre data-reactid="146"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="147"><span class="hljs-keyword" data-reactid="148">import</span><!-- react-text: 149 --> a <!-- /react-text --><span class="hljs-keyword" data-reactid="150">from</span><!-- react-text: 151 --> <!-- /react-text --><span class="hljs-string" data-reactid="152">&#x27;a&#x27;</span><!-- react-text: 153 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="154">import</span><!-- react-text: 155 --> b <!-- /react-text --><span class="hljs-keyword" data-reactid="156">from</span><!-- react-text: 157 --> <!-- /react-text --><span class="hljs-string" data-reactid="158">&#x27;b&#x27;</span><!-- react-text: 159 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="160">import</span><!-- react-text: 161 --> c <!-- /react-text --><span class="hljs-keyword" data-reactid="162">from</span><!-- react-text: 163 --> <!-- /react-text --><span class="hljs-string" data-reactid="164">&#x27;c&#x27;</span><!-- react-text: 165 -->
<!-- /react-text --><span class="hljs-comment" data-reactid="166">// ...</span><!-- react-text: 167 -->

<!-- /react-text --><span class="hljs-comment" data-reactid="168">// code here</span></code></pre><p data-reactid="169"><!-- react-text: 170 -->ä½†æ˜¯åœ¨å¼€å‘çš„é€»è¾‘ä¸­å¯èƒ½åªéœ€è¦ç”¨åˆ°å…¶ä¸­çš„ä¸€ä¸¢ä¸¢ä¾èµ–ï¼Œæ¯”å¦‚ <!-- /react-text --><code data-reactid="171">a</code><!-- react-text: 172 -->ï¼Œé‚£ä¹ˆä¾èµ–<!-- /react-text --><code data-reactid="173">b</code><!-- react-text: 174 --> <!-- /react-text --><code data-reactid="175">c</code><!-- react-text: 176 --> éƒ½æ˜¯â€œæ— æ•ˆâ€çš„ä¾èµ–ã€‚<!-- /react-text --></p><p data-reactid="177"><strong data-reactid="178">æ³¨æ„ï¼š</strong><!-- react-text: 179 --> æ— æ•ˆåªæ˜¯ç›¸å¯¹è€Œè¨€çš„ï¼Œå› ä¸ºåœ¨ <!-- /react-text --><code data-reactid="180">&#x27;b&#x27;, &#x27;c&#x27;</code><!-- react-text: 181 --> ä¾èµ–ä¸­å¯èƒ½ä¼šæ‰§è¡Œä¸€äº›å‰¯ä½œç”¨çš„é€»è¾‘ã€‚å¦‚è®¾ç½®å…¨å±€å˜é‡ï¼Œç¯å¢ƒå˜é‡ï¼Œåšäº›åˆå§‹åŒ–å·¥ä½œ...<!-- /react-text --></p><p data-reactid="182"><!-- react-text: 183 -->åœ¨ä¼˜åŒ–é¡¹ç›®çš„æ—¶å€™ï¼Œå°±éœ€è¦è€ƒè™‘åˆ°å»é™¤æ‰æ— æ•ˆçš„ <!-- /react-text --><code data-reactid="184">import</code><!-- react-text: 185 --> è¯­å¥äº†ï¼Œè¿™æ ·å¯ä»¥ä¸€å®šç¨‹åº¦ä¸ŠåŠ å¿«ç¨‹åºæ‰§è¡Œé€Ÿåº¦ï¼Œç¼©å°æ‰“åŒ…å‡ºæ¥çš„ bundle å¤§å°ã€‚<!-- /react-text --></p><h3 id="å¼€å‘æ’ä»¶ï¼" data-reactid="186"><a href="#%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6%EF%BC%81" aria-hidden="true" data-reactid="187"><span class="icon icon-link" data-reactid="188"></span></a><!-- react-text: 189 -->å¼€å‘æ’ä»¶ï¼<!-- /react-text --></h3><p data-reactid="190">ä¸æƒ³å·æ‡’çš„å¢¨é±¼ä¸æ˜¯å¥½ç¨‹åºå‘˜ï¼å¯¹äºä¸Šé¢çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å¼€å‘ Babel æ’ä»¶æ¥å®ç°ï¼Œå‡å°‘æˆ‘ä»¬çš„äººåŠ›å·¥ä½œé‡ã€‚</p><p data-reactid="191"><strong data-reactid="192">ç¨‹åºæ€è·¯</strong><!-- react-text: 193 --> 1. æ ¹æ® <!-- /react-text --><code data-reactid="194">import ...</code><!-- react-text: 195 --> è¯­æ³•ï¼Œå¾—åˆ° imported å˜é‡åé›†åˆ 2. è¿‡æ»¤æ‰ä½¿ç”¨è¿‡çš„ imported å˜é‡å 3. ç§»é™¤æ²¡æœ‰ä½¿ç”¨åˆ°çš„ <!-- /react-text --><code data-reactid="196">import ...</code><!-- react-text: 197 --> è¯­å¥<!-- /react-text --></p><p data-reactid="198">æ€è·¯æ€»æ˜¯å¾ˆç®€å•ï¼Œä½†åªæœ‰çœŸæ­£å®ç°è¿‡çš„äººæ‰çŸ¥é“é‡Œé¢çš„å…·ä½“ç§ç§ã€‚</p><p data-reactid="199">Babel æ’ä»¶è¿”å›ä¸€ä¸ª function ï¼Œå…¥å‚ä¸º babel å¯¹è±¡ï¼Œè¿”å› Objectã€‚</p><p data-reactid="200"><!-- react-text: 201 -->å…¶ä¸­ <!-- /react-text --><code data-reactid="202">pre</code><!-- react-text: 203 -->, <!-- /react-text --><code data-reactid="204">post</code><!-- react-text: 205 --> åˆ†åˆ«åœ¨è¿›å…¥/ç¦»å¼€ AST çš„æ—¶å€™è§¦å‘ï¼Œæ‰€ä»¥ä¸€èˆ¬åˆ†åˆ«ç”¨æ¥åšåˆå§‹åŒ–/åˆ é™¤å¯¹è±¡çš„æ“ä½œ<!-- /react-text --></p><pre data-reactid="206"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="207"><span class="hljs-built_in" data-reactid="208">module</span><!-- react-text: 209 -->.exports = <!-- /react-text --><span class="hljs-function" data-reactid="210"><!-- react-text: 211 -->(<!-- /react-text --><span class="hljs-params" data-reactid="212">babel</span><!-- react-text: 213 -->) =&gt;<!-- /react-text --></span><!-- react-text: 214 --> {
  <!-- /react-text --><span class="hljs-keyword" data-reactid="215">return</span><!-- react-text: 216 --> {
    pre(path) {
      <!-- /react-text --><span class="hljs-keyword" data-reactid="217">this</span><!-- react-text: 218 -->.runtimeData = {}
    },
    <!-- /react-text --><span class="hljs-attr" data-reactid="219">visitor</span><!-- react-text: 220 -->: {},
    post(path) {
      <!-- /react-text --><span class="hljs-keyword" data-reactid="221">delete</span><!-- react-text: 222 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="223">this</span><!-- react-text: 224 -->.runtimeData
    }
  }
}<!-- /react-text --></code></pre><p data-reactid="225">ç„¶åæ˜¯ visitor è®¿é—®è€…å¯¹è±¡ã€‚</p><p data-reactid="226">å…ˆçœ‹ä¸ªç®€å•çš„ä¾‹å­ï¼š å¦‚éœ€è¦å°†å¦‚ä¸‹ä»£ç ä¸­çš„ x å˜é‡é‡å‘½åä¸º y</p><pre data-reactid="227"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="228"><span class="hljs-keyword" data-reactid="229">const</span><!-- react-text: 230 --> x = <!-- /react-text --><span class="hljs-string" data-reactid="231">&#x27;x&#x27;</span><!-- react-text: 232 -->
alert(x)<!-- /react-text --></code></pre><p data-reactid="233">visitor ä¹¦å†™ä¸ºï¼š</p><pre data-reactid="234"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="235"><span class="hljs-keyword" data-reactid="236">const</span><!-- react-text: 237 --> visitor = {
  Identifier(path, data) {
    <!-- /react-text --><span class="hljs-keyword" data-reactid="238">if</span><!-- react-text: 239 --> (path.node.name === <!-- /react-text --><span class="hljs-string" data-reactid="240">&#x27;x&#x27;</span><!-- react-text: 241 -->) {
      path.node.name = <!-- /react-text --><span class="hljs-string" data-reactid="242">&#x27;y&#x27;</span><!-- react-text: 243 -->
    }
  }
}<!-- /react-text --></code></pre><p data-reactid="244">è¾“å‡ºä¸ºï¼š</p><pre data-reactid="245"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="246"><span class="hljs-keyword" data-reactid="247">const</span><!-- react-text: 248 --> y = <!-- /react-text --><span class="hljs-string" data-reactid="249">&#x27;x&#x27;</span><!-- react-text: 250 -->
alert(y)<!-- /react-text --></code></pre><p data-reactid="251"><!-- react-text: 252 -->å¯ä»¥çœ‹å‡ºï¼Œvisitor æ˜¯ Object ç±»å‹ï¼Œå…¶ä¸­çš„ key å¯¹åº” AST ä¸­çš„å„ä¸ªèŠ‚ç‚¹çš„ typeï¼Œ<!-- /react-text --><code data-reactid="253">path.node</code><!-- react-text: 254 --> æ˜¯ AST ä¸­çš„èŠ‚ç‚¹æ•°æ®ã€‚<!-- /react-text --></p><p data-reactid="255">ç®€å•äº†è§£ visitor åï¼Œå¼€å§‹æˆ‘ä»¬çš„å¼€å‘å§ï¼</p><h4 id="å¾—åˆ°-imported-å˜é‡åé›†åˆ" data-reactid="256"><a href="#%E5%BE%97%E5%88%B0-imported-%E5%8F%98%E9%87%8F%E5%90%8D%E9%9B%86%E5%90%88" aria-hidden="true" data-reactid="257"><span class="icon icon-link" data-reactid="258"></span></a><!-- react-text: 259 -->å¾—åˆ° imported å˜é‡åé›†åˆ<!-- /react-text --></h4><p data-reactid="260"><!-- react-text: 261 -->æˆ‘ä»¬éœ€è¦å…³å¿ƒ <!-- /react-text --><code data-reactid="262">import</code><!-- react-text: 263 --> è¯­å¥æœ‰ï¼š<!-- /react-text --></p><pre data-reactid="264"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="265"><span class="hljs-keyword" data-reactid="266">import</span><!-- react-text: 267 --> lodash <!-- /react-text --><span class="hljs-keyword" data-reactid="268">from</span><!-- react-text: 269 --> <!-- /react-text --><span class="hljs-string" data-reactid="270">&#x27;loadsh&#x27;</span><!-- react-text: 271 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="272">import</span><!-- react-text: 273 --> { extend, cloneDeep <!-- /react-text --><span class="hljs-keyword" data-reactid="274">as</span><!-- react-text: 275 --> clone } <!-- /react-text --><span class="hljs-keyword" data-reactid="276">from</span><!-- react-text: 277 --> <!-- /react-text --><span class="hljs-string" data-reactid="278">&#x27;lodash&#x27;</span></code></pre><p data-reactid="279"><!-- react-text: 280 -->è€Œå¯¹äº <!-- /react-text --><code data-reactid="281">import &#x27;babel-polyfill&#x27;</code><!-- react-text: 282 --> è¯­å¥ï¼Œåˆ™ä¸å…³å¿ƒã€‚<!-- /react-text --></p><p data-reactid="283"><!-- react-text: 284 -->ä»¥ <!-- /react-text --><code data-reactid="285">import { extend, cloneDeep as clone } from &#x27;lodash&#x27;</code><!-- react-text: 286 --> ä¸ºä¾‹ï¼Œå¾—åˆ°çš„ AST ä¸ºï¼š <!-- /react-text --><img src="http://obu9je6ng.bkt.clouddn.com/FmoMJFEwtRgN9pPLZeQW2-wmuFC-?imageslim" width="475" height="329" data-reactid="287"/></p><p data-reactid="288"><!-- react-text: 289 -->å…¶ä¸­çš„æ•°ç»„ <!-- /react-text --><code data-reactid="290">specifiers</code><!-- react-text: 291 --> ä¸ºï¼š <!-- /react-text --><img src="https://i.loli.net/2017/11/30/5a201ece80d93.jpg" width="356" height="505" data-reactid="292"/></p><p data-reactid="293"><!-- react-text: 294 -->æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¾—åˆ° <!-- /react-text --><code data-reactid="295">specifiers</code><!-- react-text: 296 --> ä¸­çš„ <!-- /react-text --><code data-reactid="297">local.name</code><!-- react-text: 298 --> å³å¯ï¼Œå•ä¸ºäº†åç»­å¯¹è¯¥ AST ç»“ç‚¹è¿›è¡Œæ“ä½œ(åˆ é™¤)ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦å­˜å‚¨ç»“ç‚¹ä¿¡æ¯ï¼Œå¦‚ä¸‹ä»£ç ï¼š<!-- /react-text --></p><pre data-reactid="299"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="300"><span class="hljs-function" data-reactid="301"><span class="hljs-keyword" data-reactid="302">function</span><!-- react-text: 303 --> <!-- /react-text --><span class="hljs-title" data-reactid="304">getSpecifierIdentifiers</span><!-- react-text: 305 -->(<!-- /react-text --><span class="hljs-params" data-reactid="306">specifiers = [], withPath = false</span><!-- react-text: 307 -->) <!-- /react-text --></span><!-- react-text: 308 -->{
  <!-- /react-text --><span class="hljs-keyword" data-reactid="309">const</span><!-- react-text: 310 --> collection = []
  <!-- /react-text --><span class="hljs-function" data-reactid="311"><span class="hljs-keyword" data-reactid="312">function</span><!-- react-text: 313 --> <!-- /react-text --><span class="hljs-title" data-reactid="314">loop</span><!-- react-text: 315 -->(<!-- /react-text --><span class="hljs-params" data-reactid="316">path, index</span><!-- react-text: 317 -->) <!-- /react-text --></span><!-- react-text: 318 -->{
    <!-- /react-text --><span class="hljs-keyword" data-reactid="319">const</span><!-- react-text: 320 --> node = path.node
    <!-- /react-text --><span class="hljs-keyword" data-reactid="321">const</span><!-- react-text: 322 --> item = { path, <!-- /react-text --><span class="hljs-attr" data-reactid="323">name</span><!-- react-text: 324 -->: node.local.name }
    <!-- /react-text --><span class="hljs-keyword" data-reactid="325">switch</span><!-- react-text: 326 --> (node.type) {
      <!-- /react-text --><span class="hljs-keyword" data-reactid="327">case</span><!-- react-text: 328 --> <!-- /react-text --><span class="hljs-string" data-reactid="329">&#x27;ImportDefaultSpecifier&#x27;</span><!-- react-text: 330 -->:
      <!-- /react-text --><span class="hljs-keyword" data-reactid="331">case</span><!-- react-text: 332 --> <!-- /react-text --><span class="hljs-string" data-reactid="333">&#x27;ImportSpecifier&#x27;</span><!-- react-text: 334 -->:
        collection.push(item)
        <!-- /react-text --><span class="hljs-keyword" data-reactid="335">break</span><!-- react-text: 336 -->;
    }
  }
  specifiers.forEach(loop)

  <!-- /react-text --><span class="hljs-keyword" data-reactid="337">return</span><!-- react-text: 338 --> collection
}<!-- /react-text --></code></pre><p data-reactid="339">ä»¥ä¸Šä»£ç å°†è¿”å›</p><pre data-reactid="340"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="341"><!-- react-text: 342 -->[
  { <!-- /react-text --><span class="hljs-attr" data-reactid="343">path</span><!-- react-text: 344 -->: NodePath, <!-- /react-text --><span class="hljs-attr" data-reactid="345">name</span><!-- react-text: 346 -->: <!-- /react-text --><span class="hljs-string" data-reactid="347">&#x27;extend&#x27;</span><!-- react-text: 348 --> },
  { <!-- /react-text --><span class="hljs-attr" data-reactid="349">path</span><!-- react-text: 350 -->: NodePath, <!-- /react-text --><span class="hljs-attr" data-reactid="351">name</span><!-- react-text: 352 -->: <!-- /react-text --><span class="hljs-string" data-reactid="353">&#x27;clone&#x27;</span><!-- react-text: 354 --> }
]<!-- /react-text --></code></pre><p data-reactid="355"><!-- react-text: 356 -->å¾—åˆ°è¯¥æ¡ <!-- /react-text --><code data-reactid="357">import</code><!-- react-text: 358 --> è¯­å¥çš„å¼•å…¥çš„å˜é‡æ•°ç»„åï¼Œè¿˜éœ€è¦å­˜å‚¨ä¸€ä»½ <!-- /react-text --><code data-reactid="359">import</code><!-- react-text: 360 --> è¯­å¥çš„ NodePathï¼Œä¸ºäº†åç»­æ“ä½œ(åˆ é™¤)<!-- /react-text --></p><pre data-reactid="361"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="362"><!-- react-text: 363 -->{
  <!-- /react-text --><span class="hljs-string" data-reactid="364">&#x27;extend&#x27;</span><!-- react-text: 365 -->: {
    <!-- /react-text --><span class="hljs-attr" data-reactid="366">parent</span><!-- react-text: 367 -->: path, <!-- /react-text --><span class="hljs-comment" data-reactid="368">// `import` è¯­å¥çš„ NodePath</span><!-- react-text: 369 -->
    children: [
      { <!-- /react-text --><span class="hljs-attr" data-reactid="370">path</span><!-- react-text: 371 -->: NodePath, <!-- /react-text --><span class="hljs-attr" data-reactid="372">name</span><!-- react-text: 373 -->: <!-- /react-text --><span class="hljs-string" data-reactid="374">&#x27;extend&#x27;</span><!-- react-text: 375 --> },
      { <!-- /react-text --><span class="hljs-attr" data-reactid="376">path</span><!-- react-text: 377 -->: NodePath, <!-- /react-text --><span class="hljs-attr" data-reactid="378">name</span><!-- react-text: 379 -->: <!-- /react-text --><span class="hljs-string" data-reactid="380">&#x27;clone&#x27;</span><!-- react-text: 381 --> }
    ],
    <!-- /react-text --><span class="hljs-attr" data-reactid="382">data</span><!-- react-text: 383 -->: { <!-- /react-text --><span class="hljs-attr" data-reactid="384">path</span><!-- react-text: 385 -->: NodePath, <!-- /react-text --><span class="hljs-attr" data-reactid="386">name</span><!-- react-text: 387 -->: <!-- /react-text --><span class="hljs-string" data-reactid="388">&#x27;extend&#x27;</span><!-- react-text: 389 --> }
  },
  <!-- /react-text --><span class="hljs-string" data-reactid="390">&#x27;clone&#x27;</span><!-- react-text: 391 -->: {
    <!-- /react-text --><span class="hljs-attr" data-reactid="392">parent</span><!-- react-text: 393 -->: path,
    <!-- /react-text --><span class="hljs-attr" data-reactid="394">children</span><!-- react-text: 395 -->: [
      { <!-- /react-text --><span class="hljs-attr" data-reactid="396">path</span><!-- react-text: 397 -->: NodePath, <!-- /react-text --><span class="hljs-attr" data-reactid="398">name</span><!-- react-text: 399 -->: <!-- /react-text --><span class="hljs-string" data-reactid="400">&#x27;extend&#x27;</span><!-- react-text: 401 --> },
      { <!-- /react-text --><span class="hljs-attr" data-reactid="402">path</span><!-- react-text: 403 -->: NodePath, <!-- /react-text --><span class="hljs-attr" data-reactid="404">name</span><!-- react-text: 405 -->: <!-- /react-text --><span class="hljs-string" data-reactid="406">&#x27;clone&#x27;</span><!-- react-text: 407 --> }
    ],
    <!-- /react-text --><span class="hljs-attr" data-reactid="408">data</span><!-- react-text: 409 -->: { <!-- /react-text --><span class="hljs-attr" data-reactid="410">path</span><!-- react-text: 411 -->: NodePath, <!-- /react-text --><span class="hljs-attr" data-reactid="412">name</span><!-- react-text: 413 -->: <!-- /react-text --><span class="hljs-string" data-reactid="414">&#x27;clone&#x27;</span><!-- react-text: 415 --> }
  }
}<!-- /react-text --></code></pre><h4 id="å»é™¤ä½¿ç”¨è¿‡çš„-imported-å˜é‡å" data-reactid="416"><a href="#%E5%8E%BB%E9%99%A4%E4%BD%BF%E7%94%A8%E8%BF%87%E7%9A%84-imported-%E5%8F%98%E9%87%8F%E5%90%8D" aria-hidden="true" data-reactid="417"><span class="icon icon-link" data-reactid="418"></span></a><!-- react-text: 419 -->å»é™¤ä½¿ç”¨è¿‡çš„ imported å˜é‡å<!-- /react-text --></h4><p data-reactid="420">åœ¨å»é™¤ä½¿ç”¨è¿‡çš„ imported å˜é‡åä¹‹å‰ï¼Œéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼š åœ¨ ES6 æ ‡å‡†ä¸­ï¼Œimport ä¸­å®šä¹‰çš„å˜é‡åæ˜¯ä¸èƒ½è¢«é‡æ–°å®šä¹‰çš„ï¼Œå¦‚ä¸‹ä»£ç æ˜¯ä¸è¢«å…è®¸çš„ã€‚</p><pre data-reactid="421"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="422"><span class="hljs-keyword" data-reactid="423">import</span><!-- react-text: 424 --> _ <!-- /react-text --><span class="hljs-keyword" data-reactid="425">from</span><!-- react-text: 426 --> <!-- /react-text --><span class="hljs-string" data-reactid="427">&#x27;lodash&#x27;</span><!-- react-text: 428 -->
<!-- /react-text --><span class="hljs-keyword" data-reactid="429">const</span><!-- react-text: 430 --> _ = <!-- /react-text --><span class="hljs-string" data-reactid="431">&#x27;hello&#x27;</span></code></pre><p data-reactid="432"><!-- react-text: 433 -->é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ <!-- /react-text --><code data-reactid="434">extend</code><!-- react-text: 435 --> æ˜¯è¢«ä½¿ç”¨çš„å‘¢ï¼Ÿ<!-- /react-text --></p><pre data-reactid="436"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="437"><!-- react-text: 438 -->extend = <!-- /react-text --><span class="hljs-string" data-reactid="439">&#x27;extend&#x27;</span><!-- react-text: 440 -->
[ extend ]
{ <!-- /react-text --><span class="hljs-attr" data-reactid="441">key</span><!-- react-text: 442 -->: extend }
extend - <!-- /react-text --><span class="hljs-number" data-reactid="443">2</span><!-- react-text: 444 -->
extend / <!-- /react-text --><span class="hljs-number" data-reactid="445">2</span><!-- react-text: 446 -->
extend &gt; <!-- /react-text --><span class="hljs-number" data-reactid="447">2</span><!-- react-text: 448 -->
extend &lt;= <!-- /react-text --><span class="hljs-number" data-reactid="449">2</span><!-- react-text: 450 -->
extend[<!-- /react-text --><span class="hljs-string" data-reactid="451">&#x27;key&#x27;</span><!-- react-text: 452 -->]()
extend.key = <!-- /react-text --><span class="hljs-number" data-reactid="453">233</span><!-- react-text: 454 -->
extend.key &lt; <!-- /react-text --><span class="hljs-number" data-reactid="455">233</span><!-- react-text: 456 -->
<!-- /react-text --><span class="hljs-comment" data-reactid="457">// ...</span></code></pre><p data-reactid="458"><!-- react-text: 459 -->æƒ…å†µå¤ªå¤šäº† ğŸ˜¢ æ—¢ç„¶æ­£é¢åˆ—ä¸¾è¢«ä½¿ç”¨çš„æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œé‚£ä½•ä¸é€†å‘æ€ç»´ï¼Œè€ƒè™‘ <!-- /react-text --><code data-reactid="460">extend</code><!-- react-text: 461 --> æ²¡è¢«ä½¿ç”¨çš„æƒ…å†µå‘¢ï¼Ÿ<!-- /react-text --></p><pre data-reactid="462"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="463"><span class="hljs-keyword" data-reactid="464">const</span><!-- react-text: 465 --> extend = <!-- /react-text --><span class="hljs-string" data-reactid="466">&#x27;value&#x27;</span><!-- react-text: 467 -->
{ <!-- /react-text --><span class="hljs-attr" data-reactid="468">extend</span><!-- react-text: 469 -->: <!-- /react-text --><span class="hljs-string" data-reactid="470">&#x27;value&#x27;</span><!-- react-text: 471 --> }
ref.extend
<!-- /react-text --><span class="hljs-class" data-reactid="472"><span class="hljs-keyword" data-reactid="473">class</span><!-- react-text: 474 --> <!-- /react-text --><span class="hljs-title" data-reactid="475">A</span><!-- react-text: 476 --> <!-- /react-text --></span><!-- react-text: 477 -->{
  extend() {}
  extend = <!-- /react-text --><span class="hljs-number" data-reactid="478">233</span><!-- react-text: 479 -->
}<!-- /react-text --></code></pre><p data-reactid="480">æœç„¶æƒ…å†µå°±å¥½å¤šäº†å˜› ğŸ˜„</p><p data-reactid="481">äºæ˜¯ï¼Œå»é™¤ä½¿ç”¨è¿‡çš„ imported å˜é‡åä¹Ÿå¯ä»¥æ¬¢å¿«åœ°å®Œæˆå•¦ï¼</p><h4 id="ç§»é™¤æ²¡æœ‰ä½¿ç”¨åˆ°çš„-import--è¯­å¥" data-reactid="482"><a href="#%E7%A7%BB%E9%99%A4%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84-import--%E8%AF%AD%E5%8F%A5" aria-hidden="true" data-reactid="483"><span class="icon icon-link" data-reactid="484"></span></a><!-- react-text: 485 -->ç§»é™¤æ²¡æœ‰ä½¿ç”¨åˆ°çš„ <!-- /react-text --><code data-reactid="486">import ...</code><!-- react-text: 487 --> è¯­å¥<!-- /react-text --></h4><ol data-reactid="488"><li data-reactid="489">éå†æœ€ç»ˆå¾—åˆ°çš„æ²¡æœ‰ä½¿ç”¨åˆ°å˜é‡é›†åˆ Aï¼›</li><li data-reactid="490"><!-- react-text: 491 -->å¦‚æœ item ä¸­çš„ <!-- /react-text --><code data-reactid="492">children</code><!-- react-text: 493 --> ä¸­æ¯ä¸€ä¸ª <!-- /react-text --><code data-reactid="494">name</code><!-- react-text: 495 --> éƒ½å­˜åœ¨äº A ä¸­ï¼Œåˆ é™¤ <!-- /react-text --><code data-reactid="496">item.parent</code><!-- react-text: 497 --> ç»“ç‚¹ï¼Œå¦åˆ™åªåˆ é™¤ <!-- /react-text --><code data-reactid="498">item.data.path</code><!-- react-text: 499 --> ç»“ç‚¹ï¼›<!-- /react-text --></li></ol><h3 id="æ‰“å®Œæ”¶å·¥ï¼" data-reactid="500"><a href="#%E6%89%93%E5%AE%8C%E6%94%B6%E5%B7%A5%EF%BC%81" aria-hidden="true" data-reactid="501"><span class="icon icon-link" data-reactid="502"></span></a><!-- react-text: 503 -->æ‰“å®Œæ”¶å·¥ï¼<!-- /react-text --></h3><p data-reactid="504">å®Œæˆäº†ä¸Šé¢ä¸€ç³»åˆ—çš„åˆ†æåï¼Œå¾—åˆ°çš„æœ€ç»ˆæ’ä»¶ä»£ç å¤§æ¦‚è¿™ä¸ªæ ·å­ï¼š</p><pre data-reactid="505"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="506"><span class="hljs-built_in" data-reactid="507">module</span><!-- react-text: 508 -->.exports = {
  pre() {
    <!-- /react-text --><span class="hljs-keyword" data-reactid="509">this</span><!-- react-text: 510 -->.runtimeData = {}
  }
  visitor: {
    ImportDeclaration(path, data) {
        <!-- /react-text --><span class="hljs-keyword" data-reactid="511">const</span><!-- react-text: 512 --> locals = getSpecImport(path);
        <!-- /react-text --><span class="hljs-keyword" data-reactid="513">if</span><!-- react-text: 514 --> (locals) {
          locals.forEach(<!-- /react-text --><span class="hljs-function" data-reactid="515"><!-- react-text: 516 -->(<!-- /react-text --><span class="hljs-params" data-reactid="517">pathData, index, all</span><!-- react-text: 518 -->) =&gt;<!-- /react-text --></span><!-- react-text: 519 --> {
          <!-- /react-text --><span class="hljs-keyword" data-reactid="520">const</span><!-- react-text: 521 --> {name} = pathData
          <!-- /react-text --><span class="hljs-keyword" data-reactid="522">this</span><!-- react-text: 523 -->.runtimeData[name] = {
            <!-- /react-text --><span class="hljs-attr" data-reactid="524">parent</span><!-- react-text: 525 -->: path,
            <!-- /react-text --><span class="hljs-attr" data-reactid="526">children</span><!-- react-text: 527 -->: all,
            <!-- /react-text --><span class="hljs-attr" data-reactid="528">data</span><!-- react-text: 529 -->: pathData
          }
        })
        <!-- /react-text --><span class="hljs-comment" data-reactid="530">// è·³è¿‡å½“å‰pathçš„å­èŠ‚ç‚¹çš„å‘ä¸‹éå†</span><!-- react-text: 531 -->
        <!-- /react-text --><span class="hljs-comment" data-reactid="532">// ä¸ºäº†é˜²æ­¢éå† import è¯­å¥ä¸­çš„ Identifier</span><!-- react-text: 533 -->
        path.skip()
      }
    },
    Identifier() {
      <!-- /react-text --><span class="hljs-comment" data-reactid="534">// ä¹¦å†™æ­¥éª¤2é€»è¾‘ï¼Œåˆ é™¤ä½¿ç”¨è¿‡çš„Identifier</span><!-- react-text: 535 -->
    },
    JSXIdentifier() {
      <!-- /react-text --><span class="hljs-comment" data-reactid="536">// ä¹¦å†™æ­¥éª¤2é€»è¾‘ï¼Œåˆ é™¤ä½¿ç”¨è¿‡çš„Identifier</span><!-- react-text: 537 -->
    }
  },
  post() {
    <!-- /react-text --><span class="hljs-comment" data-reactid="538">// ä¹¦å†™æ­¥éª¤3é€»è¾‘</span><!-- react-text: 539 -->
    <!-- /react-text --><span class="hljs-keyword" data-reactid="540">delete</span><!-- react-text: 541 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="542">this</span><!-- react-text: 543 -->.runtimeData
  }
}<!-- /react-text --></code></pre><p data-reactid="544"><!-- react-text: 545 -->ä»¥ä¸Šä»£ç å’‹çœ‹ä¸€ä¸‹é€»è¾‘çš„ç¡®æ²¡é—®é¢˜ã€‚ <!-- /react-text --><strong data-reactid="546">ä½†æ˜¯ï¼</strong><!-- react-text: 547 -->æ­é…<!-- /react-text --><code data-reactid="548">preset-es2015</code><!-- react-text: 549 -->ä½¿ç”¨æ—¶ï¼Œå°†ä¼šä¸èƒ½æ­£ç¡®åˆ é™¤æœªä½¿ç”¨çš„å˜é‡åæˆ–è€… import è¯­å¥ã€‚ æŠ¥é”™ï¼š<!-- /react-text --><code data-reactid="550">NodePath has been removed so is read-only.</code><!-- react-text: 551 --> å› ä¸º es2015 ä¸­ä¼šå°† import è¯­å¥è¿›è¡Œæ›¿æ¢ï¼Œç›¸å½“äºå­˜å‚¨çš„ NodePath å·²ç»è¢«åˆ é™¤äº†ã€‚<!-- /react-text --></p><p data-reactid="552">å…³äºBabelä¸­pluginå’Œpresetçš„æ‰§è¡Œé¡ºåºï¼Œå®˜æ–¹çš„è§£é‡Šå¦‚ä¸‹ï¼š</p><blockquote data-reactid="553"><p data-reactid="554">Plugins run before Presets. Plugin ordering is first to last. Preset ordering is reversed (last to first).</p></blockquote><p data-reactid="555">æ—¢ç„¶ Plugins run before Presetsï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰ä¸Šè¯‰çš„é—®é¢˜å‘¢ï¼Ÿ</p><p data-reactid="556">Babelçš„æ ¸å¿ƒå¼€å‘äººå‘˜ @hzoo åšå‡ºä¸‹åˆ—è§£é‡Š:</p><blockquote data-reactid="557"><p data-reactid="558">Plugins do go before presets, but it just adds the same visitors first before merging them.</p></blockquote><p data-reactid="559">æ„æ€æ˜¯ï¼ŒBabel åœ¨å¤„ç† plugins çš„æ—¶å€™ï¼Œä¼šå°† visitor é‡Œé¢å„ä¸ªå¯¹åº”çš„å•å…ƒç»Ÿä¸€åˆå¹¶ï¼Œç„¶åå†æŒ‰ç…§æ’ä»¶çš„é¡ºåºå»æ‰§è¡Œã€‚</p><img src="http://obu9je6ng.bkt.clouddn.com/FmNs17OZT1JSki4bVtVQ0Tepxk5P?imageslim" width="501" height="139" data-reactid="560"/><p data-reactid="561">æ‰€ä»¥åœ¨æ‰§è¡Œåˆ° post() æ–¹æ³•æ—¶ï¼Œå…¶å®es2015ä¸­çš„æ’ä»¶å·²ç»å°† import è¯­å¥æ›¿æ¢äº† ğŸ˜¢</p><p data-reactid="562">é‚£ä¹ˆè¯¥é—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿ å¯ä»¥ AST æœ€å¤–å±‚çš„ Program ç»“ç‚¹éå† pathï¼Œé€»è¾‘åŒä¸Šã€‚</p><p data-reactid="563">æœ€ç»ˆä»£ç ä¸ºï¼š</p><pre data-reactid="564"><code class="hljs language-javascript" data-query="{}" data-lang="javascript" data-reactid="565"><span class="hljs-keyword" data-reactid="566">const</span><!-- react-text: 567 --> traverseObject = {
  ImportDeclaration(path, data) {
    <!-- /react-text --><span class="hljs-comment" data-reactid="568">// ...</span><!-- react-text: 569 -->
  },
  Identifier() {
    <!-- /react-text --><span class="hljs-comment" data-reactid="570">// ...</span><!-- react-text: 571 -->
  },
  JSXIdentifier() {
    <!-- /react-text --><span class="hljs-comment" data-reactid="572">// ...</span><!-- react-text: 573 -->
  }
}

<!-- /react-text --><span class="hljs-built_in" data-reactid="574">module</span><!-- react-text: 575 -->.exports = <!-- /react-text --><span class="hljs-function" data-reactid="576"><span class="hljs-keyword" data-reactid="577">function</span><!-- react-text: 578 --> (<!-- /react-text --><span class="hljs-params" data-reactid="579">babel</span><!-- react-text: 580 -->) <!-- /react-text --></span><!-- react-text: 581 -->{
  <!-- /react-text --><span class="hljs-keyword" data-reactid="582">return</span><!-- react-text: 583 --> {
    pre(path) {
      <!-- /react-text --><span class="hljs-keyword" data-reactid="584">this</span><!-- react-text: 585 -->.runtimeData = {}
    },
    <!-- /react-text --><span class="hljs-attr" data-reactid="586">visitor</span><!-- react-text: 587 -->: {
      Program(path, data) {
        <!-- /react-text --><span class="hljs-comment" data-reactid="588">// åœ¨æœ€å¤–å±‚çš„ Program éå† path</span><!-- react-text: 589 -->
        path.traverse(traverseObject, {
          <!-- /react-text --><span class="hljs-attr" data-reactid="590">runtimeData</span><!-- react-text: 591 -->: <!-- /react-text --><span class="hljs-keyword" data-reactid="592">this</span><!-- react-text: 593 -->.runtimeData
        })
        handleRemovePath(<!-- /react-text --><span class="hljs-keyword" data-reactid="594">this</span><!-- react-text: 595 -->.runtimeData)
      }
    },
    post() {
      <!-- /react-text --><span class="hljs-keyword" data-reactid="596">delete</span><!-- react-text: 597 --> <!-- /react-text --><span class="hljs-keyword" data-reactid="598">this</span><!-- react-text: 599 -->.runtimeData
    }
  }
}<!-- /react-text --></code></pre><p data-reactid="600"><!-- react-text: 601 -->æºç ï¼š<!-- /react-text --><a href="https://github.com/imcuttle/babel-plugin-danger-remove-unused-import" data-reactid="602">GitHub +1</a></p><h2 id="å‚è€ƒèµ„æ–™" data-reactid="603"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" aria-hidden="true" data-reactid="604"><span class="icon icon-link" data-reactid="605"></span></a><!-- react-text: 606 -->å‚è€ƒèµ„æ–™<!-- /react-text --></h2><ul data-reactid="607"><li data-reactid="608"><a href="https://github.com/babel/babel/issues/5623" data-reactid="609">Discussion: Fix Plugin Ordering #5623</a></li><li data-reactid="610"><a href="https://github.com/thejameskyle/babel-handbook/blob/master/translations/zh-Hans/plugin-handbook.md" data-reactid="611">babel handbook</a></li></ul></article><div data-reactid="612"></div><nav class="single-bar clearfix" data-reactid="613"><span class="prev" data-reactid="614"><a rel="prev" href="/blog/fe/es6-å¯¹unicodeçš„æ”¯æŒå°ç»“" data-reactid="615"><em class="eux-icon eux-icon-page-prev" data-reactid="616"></em><!-- react-text: 617 -->ES6 å¯¹unicodeçš„æ”¯æŒ<!-- /react-text --></a></span><span class="next" data-reactid="618"><a rel="next" href="/blog/fe/832" data-reactid="619"><em class="eux-icon eux-icon-page-next" data-reactid="620"></em><!-- react-text: 621 -->WebGL åŸºç¡€çŸ¥è¯†<!-- /react-text --></a></span></nav></div></div></div><footer class="footer" data-reactid="622"><div class="eux-footer-area-wrapper container-singular" role="complementary" data-reactid="623"><div class="inner clearfix" data-reactid="624"><aside id="simple-links-2" class="widget sl-links-main" data-reactid="625"><h2 class="widgettitle" data-reactid="626">å‹æƒ…é“¾æ¥</h2><ul class="simple-links-list simple-links-2-list" id="simple-links-2-list" data-reactid="627"><li class="simple-links-item simple-links-widget-item" id="link-379" data-reactid="628"><a target="_blank" href="http://sux.baidu.com/" title="ç™¾åº¦ FEX å›¢é˜Ÿ" data-reactid="629">ç™¾åº¦ FEX</a></li><li class="simple-links-item simple-links-widget-item" id="link-379" data-reactid="630"><a target="_blank" href="http://efe.baidu.com/" title="ç™¾åº¦ EFE å›¢é˜Ÿ" data-reactid="631">ç™¾åº¦ EFE</a></li><li class="simple-links-item simple-links-widget-item" id="link-379" data-reactid="632"><a target="_blank" href="http://sux.baidu.com/" title="ç™¾åº¦ SUX å›¢é˜Ÿ" data-reactid="633">ç™¾åº¦ SUX</a></li><li class="simple-links-item simple-links-widget-item" id="link-379" data-reactid="634"><a target="_blank" href="https://aotu.io/" title="äº¬ä¸œå‡¹å‡¸å®éªŒå®¤ï¼Œé¢å‘å¤šç»ˆç«¯æŠ€æœ¯ä½“ç³»ï¼Œè‡´åŠ›äºæ„å»ºæ²‰æ·€ä¸åˆ†äº«åŒ…æ‹¬ä½†ä¸é™äºäº¤äº’ã€é¡µé¢åˆ¶ä½œæŠ€å·§ã€å‰ç«¯å¼€å‘ã€åŸç”ŸAPPå¼€å‘ç­‰æ–¹é¢çš„ä¸“ä¸šçŸ¥è¯†åŠæ¡ˆä¾‹ã€‚" data-reactid="635">å‡¹å‡¸å®éªŒå®¤</a></li><li class="simple-links-item simple-links-widget-item" id="link-379" data-reactid="636"><a target="_blank" href="https://fed.renren.com/" title="äººäººç½‘FED" data-reactid="637">äººäººç½‘FED</a></li></ul></aside></div></div><div class="eux-icp" data-reactid="638"><!-- react-text: 639 -->ç™¾åº¦EUXÂ ç‰ˆæƒæ‰€æœ‰Â Â©ç™¾åº¦EUXÂ Â Â Â All rights reserved.Â éª„å‚²åœ°é‡‡ç”¨Â <!-- /react-text --><a target="_blank" href="https://github.com/picidaejs/picidaejs" data-reactid="640">Picidae</a><!-- react-text: 641 -->ã€‚<!-- /react-text --></div></footer></div>
</div>
<script src="/PICIDAE_COMMON.js"></script>
<script src="/PICIDAE_ENTRY.js"></script>
</body>
</html>